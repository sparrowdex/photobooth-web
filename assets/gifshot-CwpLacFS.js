import{g as _e}from"./index-sN9SwUp5.js";function Be(re,ce){for(var T=0;T<ce.length;T++){const P=ce[T];if(typeof P!="string"&&!Array.isArray(P)){for(const X in P)if(X!=="default"&&!(X in re)){const A=Object.getOwnPropertyDescriptor(P,X);A&&Object.defineProperty(re,X,A.get?A:{enumerable:!0,get:()=>P[X]})}}}return Object.freeze(Object.defineProperty(re,Symbol.toStringTag,{value:"Module"}))}var pe={exports:{}},Ee;function qe(){return Ee||(Ee=1,function(re,ce){(function(T,P,X,A){var n={URL:T.URL||T.webkitURL||T.mozURL||T.msURL,getUserMedia:function(){var r=X.getUserMedia||X.webkitGetUserMedia||X.mozGetUserMedia||X.msGetUserMedia;return r&&r.bind(X)}(),requestAnimFrame:T.requestAnimationFrame||T.webkitRequestAnimationFrame||T.mozRequestAnimationFrame||T.oRequestAnimationFrame||T.msRequestAnimationFrame,requestTimeout:function(e,a){if(e=e||n.noop,a=a||0,!n.requestAnimFrame)return setTimeout(e,a);var i=new Date().getTime(),t=new Object,l=n.requestAnimFrame,s=function o(){var v=new Date().getTime(),c=v-i;c>=a?e.call():t.value=l(o)};return t.value=l(s),t},Blob:T.Blob||T.BlobBuilder||T.WebKitBlobBuilder||T.MozBlobBuilder||T.MSBlobBuilder,btoa:function(){var r=T.btoa||function(e){for(var a="",i=0,t=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=void 0,o=void 0,v=void 0,c=void 0,b=void 0,y=void 0,p=void 0;i<t;)s=e.charCodeAt(i++),o=e.charCodeAt(i++),v=e.charCodeAt(i++),c=s>>2,b=(s&3)<<4|o>>4,y=(o&15)<<2|v>>6,p=v&63,isNaN(o)?y=p=64:isNaN(v)&&(p=64),a=a+l.charAt(c)+l.charAt(b)+l.charAt(y)+l.charAt(p);return a};return r?r.bind(T):n.noop}(),isObject:function(e){return e&&Object.prototype.toString.call(e)==="[object Object]"},isEmptyObject:function(e){return n.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&typeof e=="function"},isElement:function(e){return e&&e.nodeType===1},isString:function(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"},isSupported:{canvas:function(){var e=P.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return T.Worker},blob:function(){return n.Blob},Uint8Array:function(){return T.Uint8Array},Uint32Array:function(){return T.Uint32Array},videoCodecs:function(){var r=P.createElement("video"),e={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{r&&r.canPlayType&&(e.mp4=r.canPlayType('video/mp4; codecs="mp4v.20.8"')!=="",e.h264=(r.canPlayType('video/mp4; codecs="avc1.42E01E"')||r.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))!=="",e.ogv=r.canPlayType('video/ogg; codecs="theora"')!=="",e.ogg=r.canPlayType('video/ogg; codecs="theora"')!=="",e.webm=r.canPlayType('video/webm; codecs="vp8, vorbis"')!==-1)}catch{}return e}()},noop:function(){},each:function(e,a){var i=void 0,t=void 0;if(n.isArray(e))for(i=-1,t=e.length;++i<t&&a(i,e[i])!==!1;);else if(n.isObject(e)){for(i in e)if(e.hasOwnProperty(i)&&a(i,e[i])===!1)break}},mergeOptions:function(e,a){if(!(!n.isObject(e)||!n.isObject(a)||!Object.keys)){var i={};return n.each(e,function(t,l){i[t]=e[t]}),n.each(a,function(t,l){var s=a[t];n.isObject(s)&&e[t]?i[t]=n.mergeOptions(e[t],s):i[t]=s}),i}},setCSSAttr:function(e,a,i){n.isElement(e)&&(n.isString(a)&&n.isString(i)?e.style[a]=i:n.isObject(a)&&n.each(a,function(t,l){e.style[t]=l}))},removeElement:function(e){n.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!n.isString(e))return{};try{var a=new n.Blob([e],{type:"text/javascript"}),i=n.URL.createObjectURL(a),t=new Worker(i);return{objectUrl:i,worker:t}}catch(l){return""+l}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==A?arguments[0]:{};if(!P.body||e.resizeFont===!1)return e.fontSize;var a=e.text,i=e.gifWidth,t=parseInt(e.fontSize,10),l=parseInt(e.minFontSize,10),s=P.createElement("div"),o=P.createElement("span");for(s.setAttribute("width",i),s.appendChild(o),o.innerHTML=a,o.style.fontSize=t+"px",o.style.textIndent="-9999px",o.style.visibility="hidden",P.body.appendChild(o);o.offsetWidth>i&&t>=l;)o.style.fontSize=--t+"px";return P.body.removeChild(o),t+"px"},webWorkerError:!1},Oe=Object.freeze({default:n}),Y={validate:function(e){e=n.isObject(e)?e:{};var a={};return n.each(Y.validators,function(i,t){var l=t.errorCode;if(!e[l]&&!t.condition)return a=t,a.error=!0,!1}),delete a.condition,a},isValid:function(e){var a=Y.validate(e),i=a.error!==!0;return i},validators:[{condition:n.isFunction(n.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:n.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:n.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:n.isFunction(n.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:n.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:n.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:n.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},Te=Object.freeze({default:Y}),xe=function(){},fe={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:xe,completeCallback:xe,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},Ie=Object.freeze({default:fe});function Re(){return Y.isValid()}function be(){return Y.isValid()}function Ue(){var r={getUserMedia:!0};return Y.isValid(r)}function Me(r){var e=!1;if(n.isArray(r)&&r.length){if(n.each(r,function(a,i){n.isSupported.videoCodecs[i]&&(e=!0)}),!e)return!1}else if(n.isString(r)&&r.length&&!n.isSupported.videoCodecs[r])return!1;return Y.isValid({getUserMedia:!0})}function Ce(){var r=256,e=499,a=491,i=487,t=503,l=3*t,s=r-1,o=4,v=100,c=16,b=1<<c,y=10,p=10,m=b>>p,S=b<<y-p,w=r>>3,C=6,k=1<<C,G=w*k,R=30,U=10,z=1<<U,H,_=8,B=1<<_,D=U+_,M=1<<D,Z,L,q,W,Q=[],$=[],J=[],te=[];function ue(g,u,O){var h,x;for(Z=g,L=u,q=O,W=new Array(r),h=0;h<r;h++)W[h]=new Array(4),x=W[h],x[0]=x[1]=x[2]=(h<<o+8)/r|0,J[h]=b/r|0,$[h]=0}function ae(){for(var g=[],u=new Array(r),O=0;O<r;O++)u[W[O][3]]=O;for(var h=0,x=0;x<r;x++){var d=u[x];g[h++]=W[d][0],g[h++]=W[d][1],g[h++]=W[d][2]}return g}function ie(){var g,u,O,h,x,d,f,F;for(f=0,F=0,g=0;g<r;g++){for(x=W[g],O=g,h=x[1],u=g+1;u<r;u++)d=W[u],d[1]<h&&(O=u,h=d[1]);if(d=W[O],g!=O&&(u=d[0],d[0]=x[0],x[0]=u,u=d[1],d[1]=x[1],x[1]=u,u=d[2],d[2]=x[2],x[2]=u,u=d[3],d[3]=x[3],x[3]=u),h!=f){for(Q[f]=F+g>>1,u=f+1;u<h;u++)Q[u]=g;f=h,F=g}}for(Q[f]=F+s>>1,u=f+1;u<256;u++)Q[u]=s}function ne(){var g,u,O,h,x,d,f,F,E,V,K,I,N,We;for(L<l&&(q=1),H=30+(q-1)/3,I=Z,N=0,We=L,K=L/(3*q),V=K/v|0,F=z,d=G,f=d>>C,f<=1&&(f=0),g=0;g<f;g++)te[g]=F*((f*f-g*g)*B/(f*f));for(L<l?E=3:L%e!==0?E=3*e:L%a!==0?E=3*a:L%i!==0?E=3*i:E=3*t,g=0;g<K;)if(O=(I[N+0]&255)<<o,h=(I[N+1]&255)<<o,x=(I[N+2]&255)<<o,u=de(O,h,x),ve(F,u,O,h,x),f!==0&&le(f,u,O,h,x),N+=E,N>=We&&(N-=L),g++,V===0&&(V=1),g%V===0)for(F-=F/H,d-=d/R,f=d>>C,f<=1&&(f=0),u=0;u<f;u++)te[u]=F*((f*f-u*u)*B/(f*f))}function oe(g,u,O){var h,x,d,f,F,E,V;for(F=1e3,V=-1,h=Q[u],x=h-1;h<r||x>=0;)h<r&&(E=W[h],d=E[1]-u,d>=F?h=r:(h++,d<0&&(d=-d),f=E[0]-g,f<0&&(f=-f),d+=f,d<F&&(f=E[2]-O,f<0&&(f=-f),d+=f,d<F&&(F=d,V=E[3])))),x>=0&&(E=W[x],d=u-E[1],d>=F?x=-1:(x--,d<0&&(d=-d),f=E[0]-g,f<0&&(f=-f),d+=f,d<F&&(f=E[2]-O,f<0&&(f=-f),d+=f,d<F&&(F=d,V=E[3]))));return V}function he(){return ne(),se(),ie(),ae()}function se(){var g;for(g=0;g<r;g++)W[g][0]>>=o,W[g][1]>>=o,W[g][2]>>=o,W[g][3]=g}function le(g,u,O,h,x){var d,f,F,E,V,K,I;for(F=u-g,F<-1&&(F=-1),E=u+g,E>r&&(E=r),d=u+1,f=u-1,K=1;d<E||f>F;){if(V=te[K++],d<E){I=W[d++];try{I[0]-=V*(I[0]-O)/M|0,I[1]-=V*(I[1]-h)/M|0,I[2]-=V*(I[2]-x)/M|0}catch{}}if(f>F){I=W[f--];try{I[0]-=V*(I[0]-O)/M|0,I[1]-=V*(I[1]-h)/M|0,I[2]-=V*(I[2]-x)/M|0}catch{}}}}function ve(g,u,O,h,x){var d=W[u],f=g/z;d[0]-=f*(d[0]-O)|0,d[1]-=f*(d[1]-h)|0,d[2]-=f*(d[2]-x)|0}function de(g,u,O){var h,x,d,f,F,E,V,K,I,N;for(K=2147483647,I=K,E=-1,V=E,h=0;h<r;h++)N=W[h],x=N[0]-g,x<0&&(x=-x),d=N[1]-u,d<0&&(d=-d),x+=d,d=N[2]-O,d<0&&(d=-d),x+=d,x<K&&(K=x,E=h),f=x-($[h]>>c-o),f<I&&(I=f,V=h),F=J[h]>>p,J[h]-=F,$[h]+=F<<y;return J[E]+=m,$[E]-=S,V}ue.apply(this,arguments);var ee={};return ee.map=oe,ee.process=he,ee}function ye(){var r=this;try{r.onmessage=function(a){var i=a.data||{},t;i.gifshot&&(t=e.run(i),postMessage(t))}}catch{}var e={dataToRGB:function(i,t,l){for(var s=t*l*4,o=0,v=[];o<s;)v.push(i[o++]),v.push(i[o++]),v.push(i[o++]),o++;return v},componentizedPaletteToArray:function(i){i=i||[];for(var t=[],l=0;l<i.length;l+=3){var s=i[l],o=i[l+1],v=i[l+2];t.push(s<<16|o<<8|v)}return t},processFrameWithQuantizer:function(i,t,l,s){for(var o=this.dataToRGB(i,t,l),v=new Ce(o,o.length,s),c=v.process(),b=new Uint32Array(this.componentizedPaletteToArray(c)),y=t*l,p=new Uint8Array(y),m=0,S=0;S<y;S++){var w=o[m++],C=o[m++],k=o[m++];p[S]=v.map(w,C,k)}return{pixels:p,palette:b}},run:function(i){i=i||{};var t=i,l=t.height;t.palette;var s=t.sampleInterval,o=t.width,v=i.data;return this.processFrameWithQuantizer(v,o,l,s)}};return e}function Ve(r,e,a,i){var t=0;i=i===A?{}:i;var l=i.loop===A?null:i.loop,s=i.palette===A?null:i.palette;if(e<=0||a<=0||e>65535||a>65535)throw"Width/Height invalid.";function o(p){var m=p.length;if(m<2||m>256||m&m-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return m}r[t++]=71,r[t++]=73,r[t++]=70,r[t++]=56,r[t++]=57,r[t++]=97;var v=0,c=0;if(r[t++]=e&255,r[t++]=e>>8&255,r[t++]=a&255,r[t++]=a>>8&255,r[t++]=(s!==null?128:0)|v,r[t++]=c,r[t++]=0,l!==null){if(l<0||l>65535)throw"Loop count invalid.";r[t++]=33,r[t++]=255,r[t++]=11,r[t++]=78,r[t++]=69,r[t++]=84,r[t++]=83,r[t++]=67,r[t++]=65,r[t++]=80,r[t++]=69,r[t++]=50,r[t++]=46,r[t++]=48,r[t++]=3,r[t++]=1,r[t++]=l&255,r[t++]=l>>8&255,r[t++]=0}var b=!1;this.addFrame=function(p,m,S,w,C,k){if(b===!0&&(--t,b=!1),k=k===A?{}:k,p<0||m<0||p>65535||m>65535)throw"x/y invalid.";if(S<=0||w<=0||S>65535||w>65535)throw"Width/Height invalid.";if(C.length<S*w)throw"Not enough pixels for the frame size.";var G=!0,R=k.palette;if((R===A||R===null)&&(G=!1,R=s),R===A||R===null)throw"Must supply either a local or global palette.";for(var U=o(R),z=0;U>>=1;)++z;U=1<<z;var H=k.delay===A?0:k.delay,_=k.disposal===A?0:k.disposal;if(_<0||_>3)throw"Disposal out of range.";var B=!1,D=0;if(k.transparent!==A&&k.transparent!==null&&(B=!0,D=k.transparent,D<0||D>=U))throw"Transparent color index.";if((_!==0||B||H!==0)&&(r[t++]=33,r[t++]=249,r[t++]=4,r[t++]=_<<2|(B===!0?1:0),r[t++]=H&255,r[t++]=H>>8&255,r[t++]=D,r[t++]=0),r[t++]=44,r[t++]=p&255,r[t++]=p>>8&255,r[t++]=m&255,r[t++]=m>>8&255,r[t++]=S&255,r[t++]=S>>8&255,r[t++]=w&255,r[t++]=w>>8&255,r[t++]=G===!0?128|z-1:0,G===!0)for(var M=0,Z=R.length;M<Z;++M){var L=R[M];r[t++]=L>>16&255,r[t++]=L>>8&255,r[t++]=L&255}t=y(r,t,z<2?2:z,C)},this.end=function(){return b===!1&&(r[t++]=59,b=!0),t};function y(p,m,S,w){p[m++]=S;var C=m++,k=1<<S,G=k-1,R=k+1,U=R+1,z=S+1,H=0,_=0;function B(J){for(;H>=J;)p[m++]=_&255,_>>=8,H-=8,m===C+256&&(p[C]=255,C=m++)}function D(J){_|=J<<H,H+=z,B(8)}var M=w[0]&G,Z={};D(k);for(var L=1,q=w.length;L<q;++L){var W=w[L]&G,Q=M<<8|W,$=Z[Q];if($===A){for(_|=M<<H,H+=z;H>=8;)p[m++]=_&255,_>>=8,H-=8,m===C+256&&(p[C]=255,C=m++);U===4096?(D(k),U=R+1,z=S+1,Z={}):(U>=1<<z&&++z,Z[Q]=U++),M=W}else M=$}return D(M),D(R),B(1),C+1===m?p[C]=0:(p[C]=m-C-1,p[m++]=0),m}}var Se=function(){},me=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=Se,this.onRenderProgressCallback=Se,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};me.prototype={workerMethods:ye(),initializeWebWorkers:function(e){var a=this,i=Ce.toString()+"("+ye.toString()+"());",t=void 0,l=void 0,s=void 0,o=void 0,v=-1,c="";for(o=e.numWorkers;++v<o;)t=n.createWebWorker(i),n.isObject(t)?(l=t.objectUrl,s=t.worker,a.workers.push({worker:s,objectUrl:l}),a.availableWorkers.push(s)):(c=t,n.webWorkerError=!!t);this.workerError=c,this.canvas=P.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var r=[],e=0;e<256;e++)r[e]=String.fromCharCode(e);return r}(),bufferToString:function(e){for(var a=e.length,i="",t=-1;++t<a;)i+=this.byteMap[e[t]];return i},onFrameFinished:function(e){var a=this,i=a.frames,t=a.options,l=!!(t.images||[]).length,s=i.every(function(o){return!o.beingProcessed&&o.done});a.numRenderedFrames++,l&&e(a.numRenderedFrames/i.length),a.onRenderProgressCallback(a.numRenderedFrames*.75/i.length),s?a.generatingGIF||a.generateGIF(i,a.onRenderCompleteCallback):n.requestTimeout(function(){a.processNextFrame()},1)},processFrame:function(e){var a=this;this.options;var i=this.options,t=i.progressCallback,l=i.sampleInterval,s=this.frames,o=void 0,v=void 0,c=function(){var y=arguments.length>0&&arguments[0]!==A?arguments[0]:{},p=y.data;delete o.data,o.pixels=Array.prototype.slice.call(p.pixels),o.palette=Array.prototype.slice.call(p.palette),o.done=!0,o.beingProcessed=!1,a.freeWorker(v),a.onFrameFinished(t)};if(o=s[e],o.beingProcessed||o.done){this.onFrameFinished();return}o.sampleInterval=l,o.beingProcessed=!0,o.gifshot=!0,v=this.getWorker(),v?(v.onmessage=c,v.postMessage(o)):c({data:a.workerMethods.run(o)})},startRendering:function(e){this.onRenderCompleteCallback=e;for(var a=0;a<this.options.numWorkers&&a<this.frames.length;a++)this.processFrame(a)},processNextFrame:function(){for(var e=-1,a=0;a<this.frames.length;a++){var i=this.frames[a];if(!i.done&&!i.beingProcessed){e=a;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,a){var i=[],t={loop:this.repeat},l=this.options,s=l.interval,o=l.frameDuration,v=l.images,c=!!v.length,b=l.gifHeight,y=l.gifWidth,p=new Ve(i,y,b,t),m=this.onRenderProgressCallback,S=c?s*100:0,w=void 0,C=void 0;this.generatingGIF=!0,n.each(e,function(k,G){var R=G.palette;m(.75+.25*G.position*1/e.length);for(var U=0;U<o;U++)p.addFrame(0,0,y,b,G.pixels,{palette:R,delay:S})}),p.end(),m(1),this.frames=[],this.generatingGIF=!1,n.isFunction(a)&&(w=this.bufferToString(i),C="data:image/gif;base64,"+n.btoa(w),a(C))},setRepeat:function(e){this.repeat=e},addFrame:function(e,a){a=n.isObject(a)?a:{};var i=this,t=i.ctx,l=i.options,s=l.gifWidth,o=l.gifHeight,v=n.getFontSize(a),c=a,b=c.filter,y=c.fontColor,p=c.fontFamily,m=c.fontWeight;c.gifHeight,c.gifWidth;var S=c.text,w=c.textAlign,C=c.textBaseline,k=a.textXCoordinate?a.textXCoordinate:w==="left"?1:w==="right"?s:s/2,G=a.textYCoordinate?a.textYCoordinate:C==="top"?1:C==="center"?o/2:o,R=m+" "+v+" "+p,U=void 0;try{t.filter=b,t.drawImage(e,0,0,s,o),S&&(t.font=R,t.fillStyle=y,t.textAlign=w,t.textBaseline=C,t.fillText(S,k,G)),U=t.getImageData(0,0,s,o),i.addFrameImageData(U)}catch(z){return""+z}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==A?arguments[0]:{},a=this.frames,i=e.data;this.frames.push({data:i,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:a.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var a=this,i=function(l){a.destroyWorkers(),n.requestTimeout(function(){e(l)},0)};a.startRendering(i)},destroyWorkers:function(){if(!this.workerError){var e=this.workers;n.each(e,function(a,i){var t=i.worker,l=i.objectUrl;t.terminate(),n.URL.revokeObjectURL(l)})}}};function ze(r,e){r.getBase64GIF(function(a){e({error:!1,errorCode:"",errorMsg:"",image:a})})}function Le(){var r=arguments.length>0&&arguments[0]!==A?arguments[0]:{},e=r.callback,a=r.images,i=r.options,t=r.imagesLength,l={getUserMedia:!0,"window.URL":!0},s=Y.validate(l),o=[],v=0,c=void 0,b=void 0;if(s.error)return e(s);b=new me(i),n.each(a,function(p,m){var S=m;m.src&&(S=S.src),n.isElement(S)?(i.crossOrigin&&(S.crossOrigin=i.crossOrigin),o[p]=S,v+=1,v===t&&y()):n.isString(S)&&(c=new Image,i.crossOrigin&&(c.crossOrigin=i.crossOrigin),function(w){m.text&&(w.text=m.text),w.onerror=function(C){var k=void 0;if(--t,t===0)return k={},k.error="None of the requested images was capable of being retrieved",e(k)},w.onload=function(C){m.text?o[p]={img:w,text:w.text}:o[p]=w,v+=1,v===t&&y(),n.removeElement(w)},w.src=S}(c),n.setCSSAttr(c,{position:"fixed",opacity:"0"}),P.body.appendChild(c))});function y(){n.each(o,function(p,m){m&&(m.text?b.addFrame(m.img,i,m.text):b.addFrame(m,i))}),ze(b,e)}}var He=function(){},ge={getGIF:function(){var e=arguments.length>0&&arguments[0]!==A?arguments[0]:{},a=arguments[1];a=n.isFunction(a)?a:He;var i=P.createElement("canvas"),t=void 0,l=e.images,s=!!l.length,o=e.cameraStream,v=e.crop,c=e.filter,b=e.fontColor,y=e.fontFamily,p=e.fontWeight,m=e.keepCameraOn;e.numWorkers;var S=e.progressCallback,w=e.saveRenderingContexts,C=e.savedRenderingContexts,k=e.text,G=e.textAlign,R=e.textBaseline,U=e.videoElement,z=e.videoHeight,H=e.videoWidth,_=e.webcamVideoElement,B=Number(e.gifWidth),D=Number(e.gifHeight),M=Number(e.interval);Number(e.sampleInterval);var Z=s?0:M*1e3,L=[],q=C.length?C.length:e.numFrames,W=q,Q=new me(e),$=n.getFontSize(e),J=e.textXCoordinate?e.textXCoordinate:G==="left"?1:G==="right"?B:B/2,te=e.textYCoordinate?e.textYCoordinate:R==="top"?1:R==="center"?D/2:D,ue=p+" "+$+" "+y,ae=v?Math.floor(v.scaledWidth/2):0,ie=v?H-v.scaledWidth:0,ne=v?Math.floor(v.scaledHeight/2):0,oe=v?z-v.scaledHeight:0,he=function se(){var le=W-1;C.length?(t.putImageData(C[q-W],0,0),de()):ve();function ve(){try{ie>H&&(ie=H),oe>z&&(oe=z),ae<0&&(ae=0),ne<0&&(ne=0),t.filter=c,t.drawImage(U,ae,ne,ie,oe,0,0,B,D),de()}catch(ee){if(ee.name==="NS_ERROR_NOT_AVAILABLE")n.requestTimeout(ve,100);else throw ee}}function de(){var ee=void 0;w&&L.push(t.getImageData(0,0,B,D)),k&&(t.font=ue,t.fillStyle=b,t.textAlign=G,t.textBaseline=R,t.fillText(k,J,te)),ee=t.getImageData(0,0,B,D),Q.addFrameImageData(ee),W=le,S((q-W)/q),le>0&&n.requestTimeout(se,Z),W||Q.getBase64GIF(function(g){a({error:!1,errorCode:"",errorMsg:"",image:g,cameraStream:o,videoElement:U,webcamVideoElement:_,savedRenderingContexts:L,keepCameraOn:m})})}};q=q!==A?q:10,M=M!==A?M:.1,i.width=B,i.height=D,t=i.getContext("2d"),function se(){if(!C.length&&U.currentTime===0){n.requestTimeout(se,100);return}he()}()},getCropDimensions:function(){var e=arguments.length>0&&arguments[0]!==A?arguments[0]:{},a=e.videoWidth,i=e.videoHeight,t=e.gifWidth,l=e.gifHeight,s={width:0,height:0,scaledWidth:0,scaledHeight:0};return a>i?(s.width=Math.round(a*(l/i))-t,s.scaledWidth=Math.round(s.width*(i/l))):(s.height=Math.round(i*(t/a))-l,s.scaledHeight=Math.round(s.height*(a/t))),s}},j={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function r(e){r.attempts=r.attempts||0;var a=e.cameraStream,i=e.completedCallback,t=e.videoElement;t&&(t.videoWidth>0&&t.videoHeight>0?(t.removeEventListener("loadeddata",j.findVideoSize),i({videoElement:t,cameraStream:a,videoWidth:t.videoWidth,videoHeight:t.videoHeight})):r.attempts<10?(r.attempts+=1,n.requestTimeout(function(){j.findVideoSize(e)},400)):i({videoElement:t,cameraStream:a,videoWidth:j.defaultVideoDimensions.width,videoHeight:j.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){n.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var a=n.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,i=e.cameraStream,t=e.completedCallback,l=e.streamedCallback,s=e.videoElement;if(n.isFunction(l)&&l(),a){if(n.isString(a))s.src=a,s.innerHTML='<source src="'+a+'" type="video/'+n.getExtension(a)+'" />';else if(a instanceof Blob){try{s.src=n.URL.createObjectURL(a)}catch{}s.innerHTML='<source src="'+a+'" type="'+a.type+'" />'}}else if(s.mozSrcObject)s.mozSrcObject=i;else if(n.URL)try{s.srcObject=i,s.src=n.URL.createObjectURL(i)}catch{s.srcObject=i}s.play(),n.requestTimeout(function o(){o.count=o.count||0,j.loadedData===!0?(j.findVideoSize({videoElement:s,cameraStream:i,completedCallback:t}),j.loadedData=!1):(o.count+=1,o.count>10?j.findVideoSize({videoElement:s,cameraStream:i,completedCallback:t}):o())},0)},startStreaming:function(e){var a=n.isFunction(e.error)?e.error:n.noop,i=n.isFunction(e.streamed)?e.streamed:n.noop,t=n.isFunction(e.completed)?e.completed:n.noop,l=e.crossOrigin,s=e.existingVideo,o=e.lastCameraStream,v=e.options,c=e.webcamVideoElement,b=n.isElement(s)?s:c||P.createElement("video");l&&(b.crossOrigin=v.crossOrigin),b.autoplay=!0,b.loop=!0,b.muted=!0,b.addEventListener("loadeddata",function(y){j.loadedData=!0,v.offset&&(b.currentTime=v.offset)}),s?j.stream({videoElement:b,existingVideo:s,completedCallback:t}):o?j.stream({videoElement:b,cameraStream:o,streamedCallback:i,completedCallback:t}):n.getUserMedia({video:!0},function(y){j.stream({videoElement:b,cameraStream:y,streamedCallback:i,completedCallback:t})},a)},startVideoStreaming:function(e){var a=arguments.length>1&&arguments[1]!==A?arguments[1]:{},i=a.timeout!==A?a.timeout:0,t=a.callback,l=a.webcamVideoElement,s=void 0;i>0&&(s=n.requestTimeout(function(){j.onStreamingTimeout(t)},1e4)),j.startStreaming({error:function(){t({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(s)},completed:function(){var v=arguments.length>0&&arguments[0]!==A?arguments[0]:{},c=v.cameraStream,b=v.videoElement,y=v.videoHeight,p=v.videoWidth;e({cameraStream:c,videoElement:b,videoHeight:y,videoWidth:p})},lastCameraStream:a.lastCameraStream,webcamVideoElement:l,crossOrigin:a.crossOrigin,options:a})},stopVideoStreaming:function(e){e=n.isObject(e)?e:{};var a=e,i=a.keepCameraOn,t=a.videoElement,l=a.webcamVideoElement,s=e.cameraStream||{},o=s.getTracks?s.getTracks()||[]:[],v=!!o.length,c=o[0];!i&&v&&n.isFunction(c.stop)&&c.stop(),n.isElement(t)&&!l&&(t.pause(),n.isFunction(n.URL.revokeObjectURL)&&!n.webWorkerError&&t.src&&n.URL.revokeObjectURL(t.src),n.removeElement(t))}};function we(r){r=n.isObject(r)?r:{},j.stopVideoStreaming(r)}function Fe(r,e){var a=r.options||{},i=a.images,t=a.video,l=Number(a.gifWidth),s=Number(a.gifHeight);Number(a.numFrames);var o=r.cameraStream,v=r.videoElement,c=r.videoWidth,b=r.videoHeight,y=ge.getCropDimensions({videoWidth:c,videoHeight:b,gifHeight:s,gifWidth:l}),p=e;a.crop=y,a.videoElement=v,a.videoWidth=c,a.videoHeight=b,a.cameraStream=o,n.isElement(v)&&(v.width=l+y.width,v.height=s+y.height,a.webcamVideoElement||(n.setCSSAttr(v,{position:"fixed",opacity:"0"}),P.body.appendChild(v)),v.play(),ge.getGIF(a,function(m){(!i||!i.length)&&(!t||!t.length)&&we(m),p(m)}))}function Pe(){var r=arguments.length>0&&arguments[0]!==A?arguments[0]:{},e=r.callback,a=r.existingVideo,i=r.options,t={getUserMedia:!0,"window.URL":!0},l=Y.validate(t),s=void 0,o=void 0;if(l.error)return e(l);if(n.isElement(a)&&a.src){if(o=a.src,s=n.getExtension(o),!n.isSupported.videoCodecs[s])return e(Y.messages.videoCodecs)}else n.isArray(a)&&n.each(a,function(v,c){if(c instanceof Blob?s=c.type.substr(c.type.lastIndexOf("/")+1,c.length):s=c.substr(c.lastIndexOf(".")+1,c.length),n.isSupported.videoCodecs[s])return a=c,!1});j.startStreaming({completed:function(c){c.options=i||{},Fe(c,e)},existingVideo:a,crossOrigin:i.crossOrigin,options:i})}function Ge(){var r=arguments.length>0&&arguments[0]!==A?arguments[0]:{},e=r.callback,a=r.lastCameraStream,i=r.options,t=r.webcamVideoElement;if(!be())return e(Y.validate());if(i.savedRenderingContexts.length){ge.getGIF(i,function(l){e(l)});return}j.startVideoStreaming(function(){var l=arguments.length>0&&arguments[0]!==A?arguments[0]:{};l.options=i||{},Fe(l,e)},{lastCameraStream:a,callback:e,webcamVideoElement:t,crossOrigin:i.crossOrigin})}function ke(r,e){if(e=n.isFunction(r)?r:e,r=n.isObject(r)?r:{},!!n.isFunction(e)){var a=n.mergeOptions(fe,r)||{},i=r.cameraStream,t=a.images,l=t?t.length:0,s=a.video,o=a.webcamVideoElement;a=n.mergeOptions(a,{gifWidth:Math.floor(a.gifWidth),gifHeight:Math.floor(a.gifHeight)}),l?Le({images:t,imagesLength:l,callback:e,options:a}):s?Pe({existingVideo:s,callback:e,options:a}):Ge({lastCameraStream:i,callback:e,webcamVideoElement:o,options:a})}}function De(r,e){if(e=n.isFunction(r)?r:e,r=n.isObject(r)?r:{},!!n.isFunction(e)){var a=n.mergeOptions(fe,r),i=n.mergeOptions(a,{interval:.1,numFrames:1,gifWidth:Math.floor(a.gifWidth),gifHeight:Math.floor(a.gifHeight)});ke(i,e)}}var je={utils:Oe,error:Te,defaultOptions:Ie,createGIF:ke,takeSnapShot:De,stopVideoStreaming:we,isSupported:Re,isWebCamGIFSupported:be,isExistingVideoGIFSupported:Me,isExistingImagesGIFSupported:Ue,VERSION:"0.4.5"};re.exports=je})(typeof window<"u"?window:{},typeof document<"u"?document:{createElement:function(){}},typeof window<"u"?window.navigator:{})}(pe)),pe.exports}var Ae=qe();const Ne=_e(Ae),Ye=Be({__proto__:null,default:Ne},[Ae]);export{Ye as g};
